{"name":"formPull::MUSTScoreAndRiskCategory","category":"view","description":"Returns the most recent MUST Score and Risk category based on provided EHR id","metaData":"{\r\n  \"parameters\": [\r\n      {\r\n          \"name\": \"ehrId\",\r\n          \"type\": \"string\",\r\n          \"description\": \"Ehr id\"\r\n      }\r\n  ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"select\r\na/context/start_time/value as dateCompositionSubmitted, \r\n    a/composer/name as creator, \r\n    a/composer/external_ref/id/value as creatorId, \r\n    a_a/data[at0001]/events[at0002]/data[at0003]/items[at0039]/value/value as evaluationPeriod, \r\n    a_a/data[at0001]/origin/value as dateTime,\r\n    a_a/data[at0001]/events[at0002]/data[at0003]/items[at0015]/value/magnitude as mustTotalScore, \r\n    a_a/data[at0001]/events[at0002]/data[at0003]/items[at0016]/value/value as mustRiskCategory, \r\n    a/name/value as templateName, \r\n    a/archetype_details/template_id/value as templateId, \r\n    a/uid/value as compositionUid    \r\n        from EHR e [ehr_id/value=:ehrId] \r\n        contains COMPOSITION a \r\n        contains (OBSERVATION a_a[openEHR-EHR-OBSERVATION.must.v0])\r\n        where a/name/value='Malnutrition universal screening tool' \r\n        order by dateCompositionSubmitted desc\r\n        limit 1"}]}