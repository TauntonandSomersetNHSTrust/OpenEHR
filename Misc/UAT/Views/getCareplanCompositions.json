{"name":"getCareplanCompositions","category":"view","description":null,"metaData":"{\n    \"parameters\": [\n        {\n            \"name\": \"carePlanId\",\n            \"description\": \"\",\n            \"type\": \"string\"\n        },\n        {\n            \"name\": \"ehrId\",\n            \"description\": \"\",\n            \"type\": \"string\"\n        }\n    ]\n}","steps":[{"processorName":"jsonAql","processorData":"SELECT c/uid/value as compositionUid, c/archetype_details/template_id/value as templateId, \nv/lifecycle_state/value as lifecycleStateValue, c/context/start_time/value as dateCompositionSubmitted, \na_a/protocol[at0015]/items[at0016]/value/id as carePlanId, a_a/description[at0019]/items[at0002]/value/value as carePlanName \nfrom EHR e [ehr_id/value=:ehrId] \ncontains VERSIONED_OBJECT vo \ncontains VERSION v[all_versions] \ncontains COMPOSITION c \ncontains ACTION a_a[openEHR-EHR-ACTION.care_plan.v0] \nWHERE carePlanId=:carePlanId\norder by dateCompositionSubmitted desc"}]}