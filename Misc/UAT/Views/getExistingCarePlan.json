{"name":"getExistingCarePlan","category":"view","description":null,"metaData":"{\n    \"parameters\": [\n        {\n            \"name\": \"ehrId\",\n            \"description\": \"\",\n            \"type\": \"string\"\n        },\n        {\n            \"name\": \"carePlanId\",\n            \"description\": \"\",\n            \"type\": \"string\"\n        }\n    ]\n}","steps":[{"processorName":"jsonAql","processorData":"SELECT a/uid/value as compositionId, a_a/protocol[at0015]/items[at0016]/value/id as carePlanId, a_b/ism_transition/current_state/value as consentCurrentState \nFROM EHR e[ehr_id/value=:ehrId] \ncontains COMPOSITION a[openEHR-EHR-COMPOSITION.encounter.v1] \ncontains ( ACTION a_a[openEHR-EHR-ACTION.care_plan.v0] and ACTION a_b[openEHR-EHR-ACTION.informed_consent.v0]) \nWHERE a/name/value=\"Care Plan Consent\" AND carePlanId=:carePlanId \nORDER BY a/context/start_time/value desc"}]}