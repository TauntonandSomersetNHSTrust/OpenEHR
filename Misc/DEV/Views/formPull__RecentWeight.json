{"name":"formPull::RecentWeight","category":"view","description":"provides most recent weight within past 7 days","metaData":"{\r\n    \"parameters\": [\r\n        {\r\n            \"name\": \"ehrId\",\r\n            \"description\": \"\",\r\n            \"type\": \"string\"\r\n        },\r\n        {\r\n            \"name\": \"date7daysago\",\r\n            \"description\": \"\",\r\n            \"type\": \"string\"\r\n        }\r\n    ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"select\r\n    a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as result,\r\n    a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/unit as Units,\r\n    a_a/protocol[at0015]/items[openEHR-EHR-CLUSTER.reporting_status.v0]/items[at0001]/value/value as inputtype,\r\n    a/context/start_time/value as dateCompositionSubmitted,\r\n    a/name/value as source,\r\n    e/ehr_id/value as EHRID\r\n    from EHR e  [ehr_id/value=:ehrId]\r\ncontains COMPOSITION a\r\ncontains OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_weight.v2]\r\nwhere (dateCompositionSubmitted > :date7daysago and inputtype = 'Actual')\r\nAND (result >= 10 AND result <= 500)\r\norder by dateCompositionSubmitted desc\r\noffset 0 limit 100"}]}