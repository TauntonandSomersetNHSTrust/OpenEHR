{"name":"formPull::WeightDateRange","category":"view","description":"Returns highest weight in date range","metaData":"{\r\n    \"parameters\": [\r\n        {\r\n            \"name\": \"ehrId\",\r\n            \"description\": \"\",\r\n            \"type\": \"string\"\r\n        },\r\n        {\r\n            \"name\": \"weightDRFrom\",\r\n            \"description\": \"\",\r\n            \"type\": \"string\"\r\n        },\r\n        {\r\n            \"name\": \"weightDRTo\",\r\n            \"description\": \"\",\r\n            \"type\": \"string\"\r\n        }\r\n    ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"select\r\n    a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/magnitude as result,\r\n    a_a/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value/units as Units,\r\n    a/context/start_time/value as dateCompositionSubmitted,\r\n    a/name/value as source,\r\n    e/ehr_id/value as EHRID,\r\n    a_a/protocol[at0015]/items[openEHR-EHR-CLUSTER.reporting_status.v0]/items[at0001]/value as inputtype\r\n    from EHR e [ehr_id/value=:ehrId]\r\ncontains COMPOSITION a\r\ncontains OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_weight.v2]\r\nwhere (dateCompositionSubmitted > :weightDRFrom and dateCompositionSubmitted < :weightDRTo and inputtype = 'Actual' and source='Malnutrition universal screening tool') AND (result >= 10 AND result <= 500)\r\norder by result desc\r\noffset 0 limit 1"}]}