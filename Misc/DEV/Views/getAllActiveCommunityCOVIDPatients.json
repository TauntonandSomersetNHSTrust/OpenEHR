{"name":"getAllActiveCommunityCOVIDPatients","category":"view","description":"Returns all community patients (RiO) that have either an active confirmed or suspected COVID flag.","metaData":"{\r\n    \"parameters\": [\r\n        {\r\n            \"name\": \"offset\",\r\n            \"type\": \"number\",\r\n            \"description\": \"Lower limit\"\r\n        },\r\n        {\r\n            \"name\": \"limit\",\r\n            \"type\": \"number\",\r\n            \"description\": \"Upper limit\"\r\n        }\r\n    ]\r\n}","steps":[{"processorName":"jsonFtlAql","processorData":"select\r\n    a_a/data[at0001]/items[at0004]/items[at0012]/value/value as Status,\r\n    a_a/data[at0001]/items[at0004]/items[at0007]/value/defining_code/code_string as SnomedCode,\r\n    a_a/data[at0001]/items[at0004]/items[at0007]/value/value as snomedDesc,\r\n    a_a/data[at0001]/items[at0004]/items[at0008]/value/value as ValidFrom,\r\n    a_a/data[at0001]/items[at0004]/items[at0010]/value/value as RecordedBy,\r\n    e/ehr_id/value as ehrId,\r\n    e/ehr_status/subject/external_ref/id/value as CommunityMRN,\r\n    e/ehr_status/subject/external_ref/namespace as Namespace\r\nfrom EHR e\r\ncontains COMPOSITION a\r\ncontains EVALUATION a_a[openEHR-EHR-EVALUATION.patient_flag.v0]\r\nwhere\r\n    a_a/data[at0001]/items[at0004]/items[at0012]/value='true' and (\r\n        a_a/data[at0001]/items[at0004]/items[at0007]/value/defining_code/code_string='840544004' or\r\n        a_a/data[at0001]/items[at0004]/items[at0007]/value/defining_code/code_string='840539006') and\r\n    e/ehr_status/subject/external_ref/namespace='RH5EHR'\r\noffset :offset limit :limit"}]}